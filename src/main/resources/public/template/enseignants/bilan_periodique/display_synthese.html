<!--
  ~ Copyright (c) Région Hauts-de-France, Département 77, CGI, 2016.
  ~
  ~ This file is part of OPEN ENT NG. OPEN ENT NG is a versatile ENT Project based on the JVM and ENT Core Project.
  ~
  ~ This program is free software; you can redistribute it and/or modify
  ~ it under the terms of the GNU Affero General Public License as
  ~ published by the Free Software Foundation (version 3 of the License).
  ~ For the sake of explanation, any module that communicate over native
  ~ Web protocols, such as HTTP, with OPEN ENT NG is outside the scope of this
  ~ license and could be license under its own terms. This is merely considered
  ~ normal use of OPEN ENT NG, and does not fall under the heading of "covered work".
  ~
  ~ This program is distributed in the hope that it will be useful,
  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
  ~
  -->

<article ng-show="selected.suiviAcquis || selected.graphique" class="twelve cell">
    <div class="display-flex-space-between">
        <h4 class="margin-top-05em">
            <i18n>evaluations.synthese.acquis.bilan.periodique</i18n> [[getI18nPeriode(search.periode)]]
        </h4>
        <button type="button" ng-click="showHistorise = true;">
            <i18n>history</i18n>
        </button>
    </div>

    <textarea name="synthese"
              class="twelve input-appreciation"
              rows="5"
              type="text"
              ng-model="elementBilanPeriodique.syntheseBilanPeriodique.synthese"
              ng-blur="elementBilanPeriodique.syntheseBilanPeriodique.saveSynthese();"
              ng-disabled="!canSaisiSyntheseBilanPeriodique"
              ng-maxlength="600"
              maxlength="600">
    </textarea>
</article>
<lightbox show="showHistorise" on-close="showHistorise = false;">
    <div class="header">
        <h2>
            <i18n>history</i18n>
        </h2>
    </div>
    <div class="twelve cell"
             ng-repeat="element in oldElementsBilanPeriodique">
        <div ng-class="{'solid-bottom': oldElementsBilanPeriodique.indexOf(element) != oldElementsBilanPeriodique.length-1}">
            <div class="display-flex-space-between">
                <h4>
                    <i18n>evaluations.synthese.acquis.bilan.periodique</i18n> [[getI18nPeriode(element.idTypePeriode)]]
                </h4>
            </div>

            <article>[[element.syntheseBilanPeriodique.synthese]]</article>

            <div>
                <i18n>evaluations.evaluation.avis.conseil</i18n> :
                <span>[[translateAvis(element.avisConseil)]]</span>
            </div>
            <div class="vertical-spacing-twice">
                <i18n>evaluations.evaluation.avis.orientation</i18n> :
                <span>[[translateAvis(element.avisOrientation)]]</span>
            </div>
        </div>
    </div>
</lightbox>