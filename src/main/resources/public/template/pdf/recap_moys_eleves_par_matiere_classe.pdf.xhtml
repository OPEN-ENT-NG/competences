<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr" lang="fr">

<head>
    <title>Tableau des moyennes par matière des élèves</title>
    <style type="text/css">

        body {
            font-family: "Calibri", sans-serif;
            align-content: center;
        }

        table {
            border-collapse: collapse;
            width: 100%;
            font-size: 12px;
            text-align: center;
            margin-top: 10px;
        }

        table  td:first-child:not(.summary) {
            max-width: 300px;
            padding-left: 5px;
            text-align: left;

        }

        th:first-child {
            max-width: 300px;
            padding-left: 5px;
        }

        tr {
            page-break-inside: avoid;
            page-break-after: auto;
        }

        td, th {
            max-width: 70px;
            border: solid 1px black;
        }

        td {
            vertical-align: middle;
        }

        th {
            word-wrap: break-word;
        }

        @page {
            size: landscape;
            margin: 5px;
            padding: 5px;

        }

        .mat {
            font-size: 10px;
        }

        .prof {
            max-width: 70px;
            font-size: 10px;
            text-align: center;
        }

        .summary {
            text-align: center;
        }

        .left {
            text-align: left;
        }

        .right {
            text-align: right;
        }

        caption {
            font-size: 18px;
        }

        div.right_head {
            right: 10px;
        }

        div.head {
            position: absolute;
            padding-left: 10px;
            margin-bottom: 10px;
        }


    </style>
</head>

<body>
<div class="head">
    <span><strong>Classe : </strong>{{nameClass}}</span>
</div>
<div class="head right_head">
    <span><strong>Période : </strong>{{periode}}</span>
</div>

<table>
    <caption>Tableau des moyennes des élèves de la classe</caption>
    <thead id="repeated-top">
    <tr>
        <th>
            <div class="right">Matières <br/>
                Enseignants
            </div>
            <br/>

            <div class="left">Elèves</div>
        </th>
        {{#matieres}}
        <th style="vertical-align: top">
            <div class="mat">{{libelle_court}}</div>
            {{#teachers}}
            <span class="prof">{{displayName}}</span>
            {{/teachers}}
            {{#coTeachers}}
            <span class="prof">{{.}}</span>
            {{/coTeachers}}

        </th>
        {{/matieres}}
        {{#withMoyGeneraleByEleve}}
        <th>Moy.</th>
        {{/withMoyGeneraleByEleve}}
    </tr>
    </thead>
    <tbody>
    {{#eleves}}
    <tr>
        <td>{{lastName}} {{firstName}}</td>
        {{#eleveMoyByMat}}
        <td>{{moyenneByMat}}</td>
        {{/eleveMoyByMat}}
        {{#withMoyGeneraleByEleve}}
        <td>{{moyGeneraleEleve}}</td>
        {{/withMoyGeneraleByEleve}}
    </tr>
    {{#summary}}
    <tr>
        <td colspan="{{totalColumn}}" class="summary">{{summary}}</td>
    </tr>
    {{/summary}}
    {{/eleves}}
    </tbody>
    <tfoot>
    <tr>
        <td><strong>Moyenne</strong></td>
        {{#matieres}}
        <td>{{moyClass}}</td>
        {{/matieres}}
        {{#withMoyGeneraleByEleve}}
        <td>{{moyClassAllEleves}}</td>
        {{/withMoyGeneraleByEleve}}
    </tr>
    {{#withMoyMinMaxByMat}}
    <tr>
        <td><strong>Moyenne Min.</strong></td>
        {{#matieres}}
        <td>{{moyMinClass}}</td>
        {{/matieres}}
        {{#withMoyGeneraleByEleve}}
        <td>{{moyMinClass}}</td>
        {{/withMoyGeneraleByEleve}}
    </tr>
    <tr>
        <td><strong>Moyenne Max.</strong></td>
        {{#matieres}}
        <td>{{moyMaxClass}}</td>
        {{/matieres}}
        {{#withMoyGeneraleByEleve}}
        <td>{{moyMaxClass}}</td>
        {{/withMoyGeneraleByEleve}}
    </tr>
    {{/withMoyMinMaxByMat}}
    </tfoot>
</table>
</body>
</html>