<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr" lang="fr">

<head>
    <title>{{title}}</title>
    <style type="text/css">
        body {
            font-family: "Calibri", sans-serif;
            align-content: center;
            padding: 0;
            margin: 0;
        }

        .paddingFifty {
            padding-left : 20px;
            padding-right : 20px;
        }

        #education {
            width: auto;
            height: 90px;
            margin-bottom: 20px;
            margin-left: -2px;
            float:left;
        }

        #imgStruct {
            height: 90px;
            position: relative;
            float:right;
        }

        .imgStructSize {
            max-width : 230px;
            max-height : 90px;
            display : inline-block;
            overflow : hidden;
            float : right;
            margin-bottom: 20px;
        }

        h1 {
            margin-top: 20px;
            padding: 5px;
            text-align: center;
            color: #FFFFFF;
            font-weight: bold;
            font-size: 20px;
            width: 100%;
        }

        h1[color="blue"] {
            background-color: #009ddd;
        }

        h1[color="black"] {
            background-color: #cccccc;
        }

        h1[color="orange"] {
            background-color: #ff9027;
        }

        h1[color="green"] {
            background-color: #b0d243;
        }

        td {
            margin: 4px;
            padding: 10px;
            border: solid 1px;
        }

        tr {
            border-color: #1f1f1f;
        }

        table {
            width: 100%;
            font-size: 12px;
            text-align: center;
            border-collapse: collapse;
        }

        .start {
            page-break-before : auto
        }

        table tr:first-child td {
            background-color: #ffffff;
        }

        table tr:first-child td:first-child {
            visibility: hidden;
        }

        .secondSuivi {
            width: 50%!important;
            padding: 5px !important;
            text-align: justify !important;
        }

        .thirdSuivi {
            padding: 5px !important;
            text-align: justify !important;
            {{#getProgramElements}}
                width: 50% !important;
            {{/getProgramElements}}
            {{^getProgramElements}}
                width: 70% !important;
            {{/getProgramElements}}
        }

        .eleve {
            padding: 5px;
            background-color: #cccccc;
            min-height : 60px;
            font-size: 14px;
        }

        .eleve > div {
            margin: 2px 1px;
            text-align: center;
        }

        .responsable {
            display:inline-block;
            margin-left: 3px;
            padding: 10px;
            width: 44%;
            float: right;
            font-size: 14px;
            min-height : 60px;
        }

        .responsable > div {
            margin-left: 30px;
            margin-right: 0px;
            font-weight: bold;
            font-size: 14px;
            text-align: left;
        }

        .left-align {
            text-align: left;
            font-weight: normal;
        }

        .synthese {
            margin-top: 10px;
            padding: 10px;
            visibility: visible !important;
        }

        .leftCom {
            text-align: left;
            font-weight: normal;
            font-size: small;
            display:block;
            color: black;
        }

        .inlineBlock {
            display: inline-block;
        }

        #imgSignature {
            width: 150px;
            height: auto;
        }

        .imgSignatureSize {
            max-width : 300px;
            max-height : 150px;
            display : block;
            overflow : hidden;
            float : right;
            margin-bottom: 20px;
        }

        .structure {
            max-width : 335px;
            height: 90px;
            font-size: small;
            font-family: "Calibri", sans-serif;
            float:left;
        }

        .structure > p {
            margin: 4px;
            margin-left : 5px;
            margin-top : 0px;
        }

        .page {
            page-break-after: always;
        }

        .page:last-child{
            page-break-after: avoid;
        }

        @page{
            size : A4;
            margin-top: 20px;
            margin-left : 1px;
            margin-right : 1px;
            margin-bottom: 40px;

            @bottom-right {
                content: counter(page) "/" counter(pages);
                font-size: x-small;
                padding-right: 10px;
            }

            @bottom-center {
                content: element(footer);
            }
        }

        @page:first {
            @bottom-center {
                content: normal;
            }
        }

        div.footer {
            display: block;
            width: 70%;
            margin: auto;
            font-size: x-small;
            position: running(footer);
        }

        .pull-right {
            float:right;
            text-align: right;
        }

        .firstProjet {
            width: 35%;
            visibility: visible !important;
            background-color: #E2F0FA;
            padding-bottom: 1px;
            padding-top: 1px;
            max-height: 43px!important;
            overflow: hidden;
        }

        .secondProjet {
            text-align:left;
            max-height: 42px!important;
            overflow: hidden;
            padding-bottom: 1px;
            padding-top: 1px;
        }

        .projets tr:nth-child(even) td {
            background-color: #FFFFFF !important;
        }

        .projets tr:first-child td {
            background-color: #FFFFFF !important;
        }

        .header td {
            height: 50px;
            font-size: x-small;
            padding-left: 2px;
            padding-right: 2px;
        }

        .onePadding {
            padding: 1px !important;
            margin: 0 !important;
            overflow: hidden;
            text-overflow: ellipsis;
            vertical-align: middle !important;
        }

        .emptyClass {
            padding-top: 1px;
            padding-bottom: 1px;
            padding-right: 2px;
        }

        .moyenneGeneral td {
            height: 10px;
            padding-top: 2px;
            padding-bottom: 2px;
        }

        .suiviDesAcquis {
            height: 700px;
        }
    </style>
</head>
<body>

{{#eleves}}
<div class="page">
    <div class="footer">
        <div>
            <span>{{firstName}} &nbsp; {{lastName}}</span>
            <span class="pull-right">{{classeOf}} {{classeNameToShow}}</span>
        </div>
        <div>
            <span>{{bilanCycle}}&nbsp; - &nbsp; {{periode}}</span>
            <span class="pull-right">{{schoolYear}}</span>
        </div>
    </div>

    <div style= "height: 130px;" class="paddingFifty">
        <img id="education" src="data:image/png;base64, {{logoData}}" alt="Logo"/>
        <div class="structure">
            {{#structureLibelle}}
            <p style="font-weight: bold">{{academy}}</p>

            <p style="font-weight: bold">{{nameStructure}}</p>
            <p>{{address}}</p>
            <p>{{town}}</p>
            <p>{{phone}}</p>
            <p>{{email}}</p>
            {{/structureLibelle}}
        </div>

        {{#hasImgStructure}}
        <div class="imgStructSize">
            <img id="imgStruct" src="data:image/png;base64, {{imgStructure}}" alt="LogoStructure"/>
        </div>
        {{/hasImgStructure}}
    </div>

    <div class="paddingFifty">
        {{^getResponsable}}
        <div class="eleve">
            <div style="font-size: small; font-weight: bold">{{schoolYear}}</div>
            <div style="font-size: small;">{{periode}}</div>
            <div style="font-size: 18px; font-weight: bold">{{firstName}} &nbsp; {{lastName}}  </div>
            <div style="font-size: small;">{{bornAt}} {{birthDateLibelle}}</div>
            {{^hideHeadTeacher}}
            <div style="font-size: small;">   {{headTeacherLibelle}}
                {{#headTeachers}}
                {{civility}} &nbsp; {{initial}} {{name}} <br/>
                {{/headTeachers}}
            </div>
            {{/hideHeadTeacher}}
            {{#addOtherTeacher}}
            <div style="font-size: small;">   {{functionOtherTeacher}}
                {{otherTeacherName}} <br/>
            </div>
            {{/addOtherTeacher}}
            <div style="font-size: small;">{{classeOf}} {{classeNameToShow}}</div>
            <div style="font-size: small;">{{numberINE}} {{ine}}</div>
        </div>
        {{/getResponsable}}
        {{#getResponsable}}
        <div style="display: inline-block;width: 50%;" class="eleve">
            <div style="font-size: small; font-weight: bold">{{schoolYear}}</div>
            <div style="font-size: small;">{{periode}}</div>
            <div style="font-size: 18px; font-weight: bold">{{firstName}} &nbsp; {{lastName}}  </div>
            <div style="font-size: small;">{{bornAt}} {{birthDateLibelle}}</div>
            {{^hideHeadTeacher}}
            <div style="font-size: small;">   {{headTeacherLibelle}}
                {{#headTeachers}}
                {{civility}} &nbsp; {{initial}} {{name}} <br/>
                {{/headTeachers}}
            </div>
            {{/hideHeadTeacher}}
            {{#addOtherTeacher}}
            <div style="font-size: small;">   {{functionOtherTeacher}}
                {{otherTeacherName}} <br/>
            </div>
            {{/addOtherTeacher}}
            <div style="font-size: small;">{{classeOf}} {{classeNameToShow}}</div>
            <div style="font-size: small;">{{numberINE}} {{ine}}</div>
        </div>
        <div class="responsable">
            {{^relativesHaveTwoNames}}
            {{#responsableLibelle}}
            <div>{{.}}</div><br/>
            {{/responsableLibelle}}
            {{/relativesHaveTwoNames}}
            {{#relativesHaveTwoNames}}
            {{#responsableLibelle}}
            <div>{{firstLastName}}</div>
            <div>{{secondLastName}}</div><br/>
            <div>{{adresseResponsable}}</div><br/>
            <div>{{codePostalRelative}}</div><br/>
            {{/responsableLibelle}}
            {{/relativesHaveTwoNames}}
        </div>
        {{/getResponsable}}
    </div>

    <br/>
    {{#hasSuiviAcquis}}
    <div class="paddingFifty">
        <table class="suiviDesAcquis">
            <tr class="header">
                <td>&nbsp;</td>
                {{#getProgramElements}}
                <td class="secondSuivi">{{suiviElementLibelle}}</td>
                {{/getProgramElements}}

                <td class="thirdSuivi">{{suiviAcquisitionLibelle}}</td>
                {{#printCoefficient}}
                <td>{{coefficientLibelle}}</td>
                {{/printCoefficient}}
                {{#getStudentRank}}
                <td>{{studentRankLibelle}}</td>
                {{/getStudentRank}}
                {{#getClassAverageMinMax}}
                <td class="onePadding">{{classAverageMinLibelle}}</td>
                <td class="onePadding">{{classAverageMaxLibelle}}</td>
                {{/getClassAverageMinMax}}
                {{#printSousMatieres}}
                <td></td>
                {{/printSousMatieres}}

                {{#getMoyenneEleve}}
                <td>{{moyenneStudentLibelle}}</td>
                {{/getMoyenneEleve}}
                {{#getMoyenneClasse}}
                <td>{{moyenneClasseLibelle}}</td>
                {{/getMoyenneClasse}}
            </tr>

            {{#suiviAcquis}}
            {{#printMatiere}}
            <tr>
                <td style= "border-right: none; background-color: #ffffff; height: {{{heightByRow}}};"  rowspan="{{rowSpan}}"
                    class="left-align emptyClass">
                    <span style="font-size: small; font-weight: bold">{{libelleMatiere}}</span><br/>

                    <div class="inlineBlock">{{#teachers}}
                        <span style="color: black; font-size: smaller;">{{initial}}.{{name}}</span>
                        {{/teachers}}</div>
                </td>

                {{#getProgramElements}}
                {{#display}}
                <td rowspan="{{rowSpan}}"
                    style="text-align: justify !important;padding-left:  5px !important;padding-right:  5px !important;background-color: #ffffff; word-wrap:break-word;{{{style}}}"
                    class="secondSuivi ">
                    {{/display}}
                    {{elementsProgramme}}
                </td>

                {{/getProgramElements}}
                {{#display}}

                <td rowspan="{{rowSpan}}"
                    style=" text-align: justify !important;background-color: #ffffff;word-wrap:break-word; {{{style}}}"
                    class="thirdSuivi ">
                    {{/display}}
                    {{appreciation}}
                </td>
                {{#printCoefficient}}
                <td rowspan="{{rowSpan}}"
                    style="text-align: center; background-color: #ffffff;word-wrap:break-word; {{{style}}}"
                    class="onePadding">
                    {{coef}}
                </td>
                {{/printCoefficient}}

                {{#getStudentRank}}
                <td rowspan="{{rowSpan}}"
                    style="font-size: x-small; text-align: center; word-wrap:break-word; {{{style}}}"
                    class="onePadding">
                    {{#studentRank}}
                    {{rank}}/{{rank_size}}
                    {{/studentRank}}
                </td>
                {{/getStudentRank}}

                {{#getClassAverageMinMax}}
                <td rowspan="{{rowSpan}}"
                    style="font-size: x-small; text-align: center;  {{{style}}}"
                    class="onePadding">
                    {{#classAverageMinMax}}
                    {{min}}
                    {{/classAverageMinMax}}
                </td>

                <td rowspan="{{rowSpan}}"
                    style="font-size: x-small; text-align: center; {{{style}}}"
                    class="onePadding">
                    {{#classAverageMinMax}}
                    {{max}}
                    {{/classAverageMinMax}}
                </td>
                {{/getClassAverageMinMax}}

                {{#printSousMatieres}}
                {{^hasSousMatiere}}
                <td style=" border-left: none;font-size: x-small; font-weight: bold; background-color: #ffffff"
                    class="onePadding">
                    <br/>
                </td>
                {{#getMoyenneEleve}}
                <td style="font-size: x-small; font-weight: bold; background-color: #ffffff "
                    class="onePadding">
                    {{moyenneEleve}}
                </td>
                {{/getMoyenneEleve}}
                {{#getMoyenneClasse}}
                <td style="font-size: x-small; font-weight: bold; background-color: #ffffff"
                    class="onePadding">
                    {{moyenneClasse}}
                </td>
                {{/getMoyenneClasse}}
                {{/hasSousMatiere}}


                {{#hasSousMatiere}}
                {{#firstSousMatiere}}
                <td style=" border-left: none;background-color: #ffffff" class="onePadding">
                    <span style="font-size: xx-small; font-weight: normal">{{libelle}}</span>
                </td>
                {{#getMoyenneEleve}}
                <td style="background-color: #ffffff" class="onePadding">
                    {{#moyenneEleveSousMat}}
                    <span style="font-size: xx-small; font-weight: normal">{{moyenneEleve}}</span>
                    {{/moyenneEleveSousMat}}
                </td>
                {{/getMoyenneEleve}}
                {{#getMoyenneClasse}}
                <td style="background-color: #ffffff" class="onePadding">
                    {{#moyenneClasseSousMat}}
                    <span style="font-size: xx-small; font-weight: normal">{{moyenneClasse}}</span>
                    {{/moyenneClasseSousMat}}
                </td>
                {{/getMoyenneClasse}}
                {{/firstSousMatiere}}
                {{/hasSousMatiere}}
                {{/printSousMatieres}}
                {{^printSousMatieres}}
                {{#getMoyenneEleve}}
                <td style="font-size: x-small; font-weight: bold; background-color: #ffffff "
                    class="onePadding">
                    {{moyenneEleve}}
                </td>
                {{/getMoyenneEleve}}
                {{#getMoyenneClasse}}
                <td style="font-size: x-small; font-weight: bold; background-color: #ffffff"
                    class="onePadding">
                    {{moyenneClasse}}
                </td>
                {{/getMoyenneClasse}}
                {{/printSousMatieres}}
            </tr>
            {{#printSousMatieres}}

            {{#sousMatieres}}
            <tr>
                <td style=" border-left: none;background-color: #ffffff" class="onePadding">
                    <span style="font-size: xx-small; font-weight: normal">{{libelle}}</span>
                </td>
                {{#getMoyenneEleve}}
                <td style="background-color: #ffffff" class="onePadding">
                    {{#moyenneEleveSousMat}}
                    <span style="font-size: xx-small; font-weight: normal">{{moyenneEleve}}</span>
                    {{/moyenneEleveSousMat}}
                </td>
                {{/getMoyenneEleve}}
                {{#getMoyenneClasse}}
                <td style="background-color: #ffffff" class="onePadding">
                    {{#moyenneClasseSousMat}}
                    <span style="font-size: xx-small; font-weight: normal">{{moyenneClasse}}</span>
                    {{/moyenneClasseSousMat}}
                </td>
                {{/getMoyenneClasse}}
            </tr>
            {{/sousMatieres}}

            {{#hasSousMatiere}}
            <tr>
                {{#printSousMatieres}}
                <td style=" border-left: none;font-size: x-small; font-weight: bold; background-color: #ffffff"
                    class="onePadding">
                    <br/>
                </td>
                {{/printSousMatieres}}
                {{#getMoyenneEleve}}
                <td style="font-size: x-small; font-weight: bold; background-color: #ffffff "
                    class="onePadding">
                    {{moyenneEleve}}
                </td>
                {{/getMoyenneEleve}}
                {{#getMoyenneClasse}}
                <td style="font-size: x-small; font-weight: bold; background-color: #ffffff"
                    class="onePadding">
                    {{moyenneClasse}}
                </td>
                {{/getMoyenneClasse}}
            </tr>
            {{/hasSousMatiere}}
            {{/printSousMatieres}}

            {{/printMatiere}}
            {{/suiviAcquis}}
            {{#printMoyenneGenerale}}
            <tr  class="moyenneGeneral" style= "background-color: #ffffff" >
                <td style= "border-right: none; "
                    class="left-align emptyClass">
                    <span style="font-size: small; font-weight: bold">{{moyenneGeneraleLibelle}}</span><br/>
                </td>
                {{#getProgramElements}}
                <td class="secondSuivi"></td>
                {{/getProgramElements}}

                <td class="thirdSuivi"></td>

                {{#printCoefficient}}
                <td></td>
                {{/printCoefficient}}
                {{#getStudentRank}}
                {{#moyenneGeneraleObj}}
                <td rowspan="{{rowSpan}}"
                    style="font-size: x-small; text-align: center; word-wrap:break-word; {{{style}}}"
                    class="onePadding">
                    {{#studentRank}}
                    {{rank}}/{{rank_size}}
                    {{/studentRank}}
                </td>
                {{/moyenneGeneraleObj}}
                {{/getStudentRank}}

                {{#getClassAverageMinMax}}
                {{#moyenneGeneraleObj}}
                <td rowspan="{{rowSpan}}"
                    style="font-size: x-small; text-align: center;  {{{style}}}"
                    class="onePadding">
                    {{#classAverageMinMax}}
                    {{min}}
                    {{/classAverageMinMax}}
                </td>

                <td rowspan="{{rowSpan}}"
                    style="font-size: x-small; text-align: center; {{{style}}}"
                    class="onePadding">
                    {{#classAverageMinMax}}
                    {{max}}
                    {{/classAverageMinMax}}
                </td>
                {{/moyenneGeneraleObj}}
                {{/getClassAverageMinMax}}
                {{#printSousMatieres}}
                <td></td>
                {{/printSousMatieres}}
                {{#getMoyenneEleve}}
                <td style="font-weight: bold;"> {{moyenneGenerale}}</td>
                {{/getMoyenneEleve}}
                {{#getMoyenneClasse}}
                <td style="font-size: x-small; font-weight: bold;"> {{moyenneGeneraleClass}}</td>
                {{/getMoyenneClasse}}
            </tr>
            {{/printMoyenneGenerale}}

        </table>
    </div>
    {{/hasSuiviAcquis}}
    <br/>
    <div class="paddingFifty">
        <table style="">
            <tr style="page-break-inside: avoid;">
                <td class="" style=" visibility: visible; width: 60%; border: none">
                    <div  class="leftCom" style="{{appreciationCPEStyle}}">
                        <span>{{viescolaireLibelle}}</span>
                        <span>{{appreciationCPE}}</span>
                    </div>
                    <div class="leftCom">
                        {{#evenements}}
                        <div>{{.}}</div>
                        {{/evenements}}
                        {{#printMoyenneAnnuelle}}
                        <div><span style="font-weight: bold">{{moyenneAnnuelleLibelle}} : </span>{{moyenneAnnuelle}}</div>
                        {{/printMoyenneAnnuelle}}
                        <div><span style="font-weight: bold">{{beforeSyntheseBP}}</span>{{syntheseBilanPeriodque}}</div>
                        {{#hasAvisConseil}}
                        <div><span style="font-weight: bold">{{beforeAvisConseil}}</span>{{avisConseil}}</div>
                        {{/hasAvisConseil}}

                        {{#hasAvisOrientation}}
                        <div><span style="font-weight: bold">{{beforeAvisOrientation}}</span>{{avisOrientation}}</div>
                        {{/hasAvisOrientation}}
                    </div>
                </td>
                <td style=" width: 25%; border: none">
                    <div  style= " display : block;overflow : hidden; float : right;">
                        {{nameCE}}
                    </div>

                    {{#hasImgSignature}}
                    <div class="imgSignatureSize">
                        <img id="imgSignature" src="data:image/png;base64, {{imgSignature}}" alt="LogoStructure"/>
                    </div>
                    {{/hasImgSignature}}

                </td>
            </tr>
        </table>
    </div>
    {{#showFamily}}
    <div class="paddingFifty">
        <div class="synthese" style="height: 60px; padding: 5px">
            <span style="float: left; margin-left: 5px; margin-top: 0px !important;font-size: small;">{{familyVisa}}</span>

            <span style="float: right;margin-right: 5px; text-align:right;margin-top: 0px;font-size: small;">{{signature}}</span>
        </div>
    </div>
    {{/showFamily}}

    {{#showProjects}}
    <div class="start paddingFifty">
        {{#projects}}
        {{#hasProject}}
        <h4 class="">{{libelle}}</h4>
        <table class="projets">
            {{#elements}}
            {{#hasCommentaire}}
            <tr>
                <td class="firstProjet left-align">
                    {{#hasLibelle}}
                    {{#libelle}}
                    <span style="font-size: small; font-weight: bold">{{libelle}}</span><br/>
                    {{/libelle}}
                    {{/hasLibelle}}
                    {{#theme}}
                    {{#hasLibelle}}
                    <span style="font-size: smaller;">{{libelle}}</span><br/>
                    {{/hasLibelle}}
                    {{^hasLibelle}}
                    <span style="font-size: small; font-weight: bold">{{libelle}}</span><br/>
                    {{/hasLibelle}}
                    {{/theme}}
                    {{#intervenantsMatieres}}

                    <span style="color: black; font-size: xx-small !important;">{{#intervenant}}
                      * {{displayName}}-
                    {{/intervenant}}
                </span>
                    <span style="color: black; font-size: x-small !important;">{{#matiere}}
                    {{name}}
                    {{/matiere}}
                </span><br/>
                    {{/intervenantsMatieres}}
                </td>
                <td class="secondProjet" style="{{{commentaireStyle}}}">{{commentaire}}</td>
            </tr>
            {{/hasCommentaire}}
            {{/elements}}
        </table>
        {{/hasProject}}
        {{/projects}}
   </div>
    {{/showProjects}}
</div>
{{/eleves}}

</body>
</html>
